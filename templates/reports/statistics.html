{% extends "base.html" %}

{% block title %}Statistics{% endblock %}

{% block htmlhead %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <style type="text/css">
        .center-block {
            float: none !important
        }

        .btn-input {
            display: block;
        }

        .btn-input .btn.form-control {
            text-align: left;
        }

        .btn-input .btn.form-control span:first-child {
            left: 10px;
            overflow: hidden;
            position: absolute;
            right: 25px;
        }

        .btn-input .btn.form-control .caret {
            margin-top: -1px;
            position: absolute;
            right: 10px;
            top: 50%;
        }

        /* Sidebar navigation */
        .nav-sidebar {
            margin-left: -20px;
            margin-right: -21px; /* 20px padding + 1px border */
            margin-bottom: 20px;
        }
        .nav-sidebar > li > a {
            padding-left: 20px;
            padding-right: 20px;
        }
        .nav-sidebar > .active > a {
            color: #fff;
            background-color: #428bca;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="col-sm-3 col-md-2 sidebar">
        <ul class="nav nav-sidebar">
            <li class="active"><a class="ajax_link" gtype="default" href=#><h3>Statistics</h3></a></li>
        </ul>
        <ul class="nav nav-sidebar">
            <li><a class="ajax_link" gtype="incidents" href=#>Incidents Anually</a></li>
            <li><a class="ajax_link" gtype="num_suspects" href=#>Number of Suspects Anually</a></li>
        </ul>
        <ul class="nav nav-sidebar">
            <li><a class="ajax_link" gtype="resolve_days" href=#>Resolve Days Distribution</a></li>
            <li><a class="ajax_link" gtype="creature" href=#>Creatures Distribution</a></li>
            <li><a class="ajax_link" gtype="location" href=#>Location Distribution</a></li>
            <li><a class="ajax_link" gtype="t_location" href=#>Trial Location Distribution</a></li>
            <li><a class="ajax_link" gtype="fine" href=#>Fine Amount Distribution</a></li>
        </ul>
    </div>

    <div class="col-sm-8 col-sm-offset-1">
        <h1 class="page-header">Welcome to the Statistics Page</h1>
        <br>
        <h4>Choose one of the options from the left to display the corresponding graph.</h4>
    </div>

    <div class="col-sm-8 col-sm-offset-1" id="piechart_3d" style="width: 750px; height: 500px;"></div>

    <script>
        google.load("visualization", "1", {packages:["corechart"]});
        var gtype;

        $("li").click(function() {
            $("li").removeClass("active");
            $(this).addClass("active");
        });

        drawChart = function(data) {
            var table_data = google.visualization.arrayToDataTable([
                ['Creature', '# of times poached'],
                ['Sea Lion',     5],
                ['Seahorse',      3],
                ['Krab',  1],
                ['Sea otter', 3],
                ['Whale',    10]
            ]);

            var options = {
                title: 'Creatures Poached',
                is3D: true,
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
            chart.draw(table_data, options);
        }

        ajax_func = function() {
            gtype = $(this).attr("gtype");

            $.ajax({
                type: "GET",
                url: "/reports/statistics",
                data: gtype,
                dataType: "json",
                success: function() {
		    console.log(data);
		},
                error: drawChart
            });
        }

        $(".ajax_link").click(ajax_func);
    </script>
{% endblock %}
