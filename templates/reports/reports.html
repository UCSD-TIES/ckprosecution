{% extends "base.html" %}

{% block title %}Coastkeeper: Report Database and Analytics{% endblock %}

{% block htmlhead %}
<script type="text/javascript" src="{{ STATIC_URL }}coastkeeper/JS/jquery.js?version=20120318"></script>
<script type="text/javascript" src="{{ STATIC_URL }}coastkeeper/JS/json2.js"></script>
<style>
.createtable {text-align:left;}
.button { margin: 4px 10px; }
.line { border-bottom: 1px solid black; }
.close { float: right; }
.notice { color: #F4811F; padding-top: 25px; }
.newlook {background-color:white;}
.actions {margin-left:10px;}
.actions { margin-bottom: 15px; }
.title {margin-left: 10px;margin-top: 25px;margin-bottom:25px; font-size:2em;}
</style>
{% endblock %}

{% block content %}
<div class="title">
	Reports
</div>
{% block actions %}
<div class="actions">
		<a href="#create_report" role="button" data-target="#create_report" data-toggle="modal" class="btn btn-primary"><i class="icon-plus-sign icon-large"></i>&nbsp&nbspNew Report</a>
</div>
{% endblock %}



<div class="reporttable">
	<table class="table" id="expenselist">
		<thead>
			<tr>
	            <th>Crime Data</th>  
	            <th>Days to Resolve</th>  
	            <th>Jail</th>  
				<th>Number Involved</th>
				<th>Creature</th>
				<th>Location</th>
				<th>Trial Location</th>
				<th>Description</th>
				<th>MPA Involved</th>
				<th>Fine</th>
				<th>Update Date</th>
			</tr>
		</thead>
		<tbody id="table_body">
		{% for item in reports %}
			<tr id="{{ item.id }}">
				<td>{{ item.crime_date }}</td>
				<td>{{ item.resolve_days }}</td>
				<td>{{ item.jail_time }}</td>
				<td>{{ item.num_involved }}</td>
				<td>{{ item.creature }}</td>
				<td>{{ item.location }}</td>
				<td>{{ item.trial_location }}</td>
				<td>{{ item.violation_description }}</td>
				<td>{{ item.mpa }}</td>
				<td>{{ item.fine }}</td>
				<td>{{ item.update_date }}</td>
			</tr>
		{% endfor %}
	    </tbody>
	</table>
</div>

<div id="create_report" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>Create New Report</h3>
	</div>
	<div class="modal-body">
		<form action="" class="form-inline" method="POST">{%csrf_token%}
			<div class="pull-left">
					<table class="createtable">
					{{form.as_table}}
					</table>
					<input id="invis" type="submit" value="Submit">
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn" data-dismiss="modal">Close</a>
		<a href="#" class="btn btn-primary" id="create_submit">Create Report</a>
	</div>
</div>


{% if error %}
<div id="create_error" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>Error!</h3>
	</div>
	<div class="modal-body">
		{{ error }}
	</div>
	<div class="modal-footer">
		<a href="#" class="btn btn-primary" data-dismiss="modal">Okay</a>
	</div>
</div>
<script type="text/javascript">
$('#create_error').modal({backdrop:false});
</script>
{% endif %}

{% if success %}
<div id="create_success" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>Success!</h3>
	</div>
	<div class="modal-body">
		Successfully created Report.
	</div>
	<div class="modal-footer">
		<a href="#" class="btn btn-primary" data-dismiss="modal">Okay</a>
	</div>
</div>
<script type="text/javascript">
$('#create_success').modal({backdrop:false});
</script>
{% endif %}

<script type="text/javascript">

{% block main_javascript %}


$('#create_report').modal({backdrop:false});
$('#create_submit').click(function(){$('#invis').submit();});
$('#create_report').modal('hide');

{% endblock %}
</script>

{% endblock %}
